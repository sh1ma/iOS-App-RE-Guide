# Appleのサンドボックス

Darwin(iOSやMacOSのOS基盤)のXNU(カーネル)にはサンドボックス機能があります．
サンドボックスというのはアクセス制御システムのことで，サンドボックス上で動作するプロセスは外部へのアクセスが制限されます．
ここではXNUのサンドボックスフレームワークの設計と実装について説明します．

## 強制アクセス制御(MAC)

XNUに実装されているサンドボックス機能の基盤とも言えるのが__Mandatory Access Control(MAC)__フレームワークです．
これは__ポリシー__と呼ばれるルールに基づいてsyscall，mach Trapの実行制御を行うものです．とはいえXNU自体に__ポリシー__が実装されているわけではありません．ではどこで実装されているのでしょうか？　それは__ポリシーモジュール__と呼ばれるカーネル拡張(kext)によって実装されています．

## ポリシーモジュール

ポリシーモジュールと呼ばれるカーネル拡張はMACに呼び出されたあと，要求された操作を検査し，実行の可否を判定します．
